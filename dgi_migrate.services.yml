---
services:
  dgi_migrate.substream.stream_wrapper:
    class: Drupal\dgi_migrate\Utility\Substream
    tags:
      - name: stream_wrapper
        scheme: dgi-migrate.substream
  dgi_migrate.foxml_parser:
    class: Drupal\dgi_migrate\Utility\Fedora3\FoxmlParser
    arguments:
      - '@cache.dgi_migrate_parsed_foxml'
      - '@dgi_migrate.foxml_parser.datastream_lowlevel_storage'
  cache.dgi_migrate_parsed_foxml:
    class: Drupal\Core\Cache\CacheBackendInterface
    tags:
      - name: cache.bin
    factory: cache_factory:get
    arguments:
      - dgi_migrate_parsed_foxml
  dgi_migrate.route_subscriber:
    class: Drupal\dgi_migrate\Routing\RouteSubscriber
    tags:
      - name: event_subscriber
  dgi_migrate.foxml_parser.object_lowlevel_storage:
    class: Drupal\dgi_migrate\Utility\Fedora3\ObjectLowLevelAdapterManager
    tags:
      - name: service_collector
        tag: dgi_migrate.foxml_parser.object_lowlevel_storage
        call: addAdapter
  dgi_migrate.foxml_parser.datastream_lowlevel_storage:
    class: Drupal\dgi_migrate\Utility\Fedora3\DatastreamLowLevelAdapterManager
    tags:
      - name: service_collector
        tag: dgi_migrate.foxml_parser.datastream_lowlevel_storage
        call: addAdapter
